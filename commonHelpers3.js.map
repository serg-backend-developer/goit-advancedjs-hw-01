{"version":3,"file":"commonHelpers3.js","sources":["../src/js/03-feedback.js"],"sourcesContent":["import throttle from 'lodash.throttle';\n\nconst localStorageKey = 'feedback-form-state';\nconst formRef = document.querySelector('.feedback-form');\nconst baseFormState = { email: '', message: '' };\n\nconst setLocalStorageData = data => {\n  const json = JSON.stringify(data);\n  localStorage.setItem(localStorageKey, json);\n};\n\nconst getLocalStorageData = () => {\n  let result = '';\n  try {\n    result = JSON.parse(localStorage.getItem(localStorageKey));\n  } catch (error) {\n    console.log(error.message);\n    return;\n  }\n  return result;\n};\n\nconst handleInput = ({ target: { name, value } }) => {\n  formState[name] = value;\n  setLocalStorageData(formState);\n};\n\nconst handleSubmit = e => {\n  e.preventDefault();\n\n  formRef.reset();\n  console.log(formState);\n  localStorage.removeItem(localStorageKey);\n  Object.keys(formState).forEach(el => (formState[el] = ''));\n};\n\nconst firstData = getLocalStorageData();\n\nconst formState = { ...baseFormState, ...firstData };\n\nObject.keys(formState).forEach(el => (formRef[el].value = formState[el]));\n\nformRef.addEventListener('input', throttle(handleInput, 1500));\nformRef.addEventListener('submit', handleSubmit);\n"],"names":["localStorageKey","formRef","baseFormState","setLocalStorageData","data","json","getLocalStorageData","result","error","handleInput","name","value","formState","handleSubmit","e","el","firstData","throttle"],"mappings":"wIAEA,MAAMA,EAAkB,sBAClBC,EAAU,SAAS,cAAc,gBAAgB,EACjDC,EAAgB,CAAE,MAAO,GAAI,QAAS,EAAE,EAExCC,EAAsBC,GAAQ,CAClC,MAAMC,EAAO,KAAK,UAAUD,CAAI,EAChC,aAAa,QAAQJ,EAAiBK,CAAI,CAC5C,EAEMC,EAAsB,IAAM,CAChC,IAAIC,EAAS,GACb,GAAI,CACFA,EAAS,KAAK,MAAM,aAAa,QAAQP,CAAe,CAAC,CAC1D,OAAQQ,EAAO,CACd,QAAQ,IAAIA,EAAM,OAAO,EACzB,MACD,CACD,OAAOD,CACT,EAEME,EAAc,CAAC,CAAE,OAAQ,CAAE,KAAAC,EAAM,MAAAC,CAAO,CAAA,IAAO,CACnDC,EAAUF,CAAI,EAAIC,EAClBR,EAAoBS,CAAS,CAC/B,EAEMC,EAAeC,GAAK,CACxBA,EAAE,eAAc,EAEhBb,EAAQ,MAAK,EACb,QAAQ,IAAIW,CAAS,EACrB,aAAa,WAAWZ,CAAe,EACvC,OAAO,KAAKY,CAAS,EAAE,QAAQG,GAAOH,EAAUG,CAAE,EAAI,EAAG,CAC3D,EAEMC,EAAYV,EAAmB,EAE/BM,EAAY,CAAE,GAAGV,EAAe,GAAGc,CAAS,EAElD,OAAO,KAAKJ,CAAS,EAAE,QAAQG,GAAOd,EAAQc,CAAE,EAAE,MAAQH,EAAUG,CAAE,CAAE,EAExEd,EAAQ,iBAAiB,QAASgB,EAASR,EAAa,IAAI,CAAC,EAC7DR,EAAQ,iBAAiB,SAAUY,CAAY"}